# java-chicken-2019

### 순서

- 기능 요구사항
- 프로그래밍 요구사항
- 과제 진행 요구사항
- 예외처리/기타 세부사항

### 목표

치킨집 사장님이 사용할 간단한 POS 프로그램을 구현한다. 기능은 아래와 같다.

- 주문등록
- 결제하기
- 프로그램 종료

메뉴는 각각 **번호, 종료, 이름, 가격**을 가진다.

테이블은 각각 **번호**를 가진다.

한 테이블에서 주문할 수 있는 한 메뉴의 최대 수량은 99개이다(예외처리)

주문이 등록된 테이블은, **결제가 이뤄지기 전까지 테이블 목록에 별도 표시** 해준다.

---

## 기능 요구사항

**할인 : 결제파트**

- 주문 내역에 대한 계산을 할 때는, **결제 유형에 따라 할인율**이 달라진다.
- 치킨 종류 메뉴(의미 불명확!!) 합이 10개 넘으면 10000원 할인
- 현금 결제는 5% 할인, 할인된 금액에서 한번 더 할인

**구현**

- 주문이나 결제가 불가한 경우 다시 주문(재귀적으로 구현)
- 최종 결제 금액 디스플레이

---

## 프로그래밍 요구사항

- 메인의 위치는 지정되어 있고, 여기에서 구현을 시작한다
- 메뉴 클래스를 활용하여야 한다.
  - 주어진 생성자를 사용한다
  - 필드를 추가할 수 없다(기존 필드의 자료형 변경은 가능하다 - 원시타입 포장 여부 확인)
  - 필드의 접근 제어자는 모두 private이다.
- MenuRepository 객체를 활용하여야 한다.
  - 기존 코드를 유지한다. 단 추가는 가능하다.
- 테이블 클래스를 활용하여야 한다.
  - 주어진 생성자를 활용한다.
  - 필드의 접근 제어자는 private으로 구현한다.
- TableRepository 클래스를 활용하여야 한다.
  - 기존 코드를 유지한다. 단 추가는 가능하다.

---

## 과제 진행 요구사항

### TO-DO

- 패키지를 쪼갠다
  - 메인과 도메인을 나누고, 도메인을 매장, 뷰, 메뉴, 테이블로 나눈다.

- Store 클래스를 만든다.
  [추가되는 클래스 : TodoNumber]

  - Main 함수에서 Store 객체를 통해 해결하도록 하여, main에서 직접 메뉴와 테이블에 접근하지 않도록 한다.
  - 일단 이 프로젝트에서는 여러 개의 가게를 동시에 운영하지는 않을 것이다. 
    그렇기 때문에 Store 객체는 싱글톤으로 구현하고, 잘못 생성되는 일이 없도록 조정한다.
  - Store 클래스는 테이블객체 리스트와 메뉴객체 리스트를 가지고, 별도로 결제 클래스까지 호출할 수 있도록 한다.
  - 입력을 받는다(주문, 결제, 프로그램 종료) :  TodoNumber 객체를 통해 처리한다.
    - TodoNumber 객체는 일급 collection으로 구현되어, 입력에 대한 예외처리 및 값의 변조 불가를 보증한다. 
    - 주문시에는 메뉴 클래스를 통해 메뉴를 선택, 입력받는다
    - 결제시에는 앞서 저장된 값을 바탕으로 결제 객체를 호출한다.
    - 프로그램 종료 시에는 메인 루프를 종료시킨다.
    - 어떤 값이 나왔는지를 내부 메서드를 통해 알 수 있다.

- 주문 로직을 구현한다.
  [추가되는 클래스 : Order]

  - 주문을 선택할 경우 해야 할 로직은 다음과 같다.

    - 테이블 목록 출력
    - 테이블 선택
    - 메뉴 목록 출력
    - 메뉴 선택
    - 메뉴 수량 입력
    - 종료 및 테이블에 메뉴 할당

  - 이 중 테이블선택과 메뉴선택, 수량입력은 예외처리가 적용된다.

  - 종료 로직에서, 이후 테이블 목록을 출력할 때 주문한 테이블에는 따로 표시가 되도록 한다.
    이를 위해 테이블 객체는 주문목록을 리스트로 보유한다.

  - 한 테이블에서 여러번 주문이 가능하다.

    > 한번에 한 메뉴만 주문할 수 있으므로, 한 테이블에서 여러번 주문하는 게 합리적이다.
    >
    > 그러므로 주문을 할 때마다 table에 주문한 값을 넘기면 된다.
    >
    > 일단 구현단에서 예외처리(99개 이상 주문불가)는 한번 주문에 그만큼이 불가한 것으로 구현하고, 추후 table을 통해 검사 메서드를 추가한다.

  - 주문이 끝나면, Order 클래스에 그 값을 넣는다. 

    > Order 클래스는 메뉴와 개수를 묶은 내부 클래스를 리스트로 보유한다.
    >
    > 또한 주문이 얼마나 되었는지에 대해 출력하는 메서드를 가진다.
    >
    > 이외에도 추후 각각 메뉴의 개수에 대해 99개를 초과하는지 검사하는 메서드를 추가할 예정이다.
    >
    > 이 클래스는 테이블마다 하나씩 보유한다.

- 결제 로직을 구현한다.

  - 결제를 선택할 경우 해야 할 로직은 다음과 같다.
    - 테이블 목록 출력
    - 테이블 선택(미결제 테이블일 시 예외처리)
    - 주문내역 출력
    - 결제 진행 메세지 출력
    - 결제수단 선택
    - 할인율 계산
    - 최종 결제금액 출력
    - 종료
  - 이 중 결제수단 선택과 테이블 선택에서는 예외처리가 들어간다.
    테이블 선택에서는 단순히 존재하는 테이블이냐, 뿐 아니라 주문을 한 테이블인지도 검사해야한다. 별도로 메서드를 구현한다.
  - 별도로 고객 클래스나 매장 금전 클래스가 없으므로, 최종 결제금액 출력 후 종료 로직에서는 할 일이 없다. (혹시 생기면 추가 작성)

---

## 예외처리

1. todoNumber (완료)

   - 타입 오류
   - 1,2,3 이외의 값이 들어올 경우

2. 주문등록-테이블선택 (완료)

   - 타입 오류
   - 어떤 테이블과도 매칭되지 않는 번지값이 들어올 경우
     (테이블 번호는 순서대로가 아니라, 생성과 함께 정해진다. 선형으로 탐색하되 직접 다 매칭해봐야 한다. 테이블 내에 확인하는 메서드를 추가한다)

3. 주문등록-메뉴선택 (완료)

   - 타입 오류
   - 어떤 메뉴와도 매칭되지 않는 메뉴번호가 들어올 경우
     (위와 같다. 직접 다 매칭해보고, 메서드 추가한다.)

4. 주문등록-수량선택 (미완)

   - 타입 오류 (완료)

   - 양수가 아닌 값이 입력될 경우 (완료)

   - 그 메뉴에 대한 주문값이 99개가 넘을 경우 (구현중)

     > "한 메뉴의 최대 수량은 99개" 라고 하면 생기는 문제
     >
     > - 주문을 한 테이블에서 여러번 해서 누적된다면?
     > - 메뉴별로 99개씩 다 시키는건 가능? 한 메뉴당인가?

5. 결제등록-테이블선택(미구현)

   위의 주문등록-테이블선택 과 같다. 다만 하나 추가하면,

   - 만약 주문하지 않은 테이블이 선택될 경우

6. 결제등록-결제수단선택(미구현)

   - 타입 오류
   - 결제수단 번호와 매칭이 되지 않는 입력(1,2 이외--현재 프로젝트에서는)